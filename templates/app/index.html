{% extends "base.html" %}
{% block title %}Home | CityPulse{% endblock %}
{% load static %}
{% block content %}

<header class="hero">
  <style>
    @keyframes slideshow {
      0%   { background-image: url("{% static 'app/images/picture1.jpg' %}"); }
      25%  { background-image: url("{% static 'app/images/picture2.jpg' %}"); }
      50%  { background-image: url("{% static 'app/images/picture3.jpg' %}"); }
      75%  { background-image: url("{% static 'app/images/picture4.jpg' %}"); }
      100% { background-image: url("{% static 'app/images/picture7.jpg' %}"); }
    }

    .hero {
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center; /* Center horizontally */
  position: relative;
  background-size: cover;
  background-position: center;
  animation: slideshow 15s infinite ease-in-out;
  padding: 0 2rem;
  overflow: hidden;
  text-align: center; /* Center text inside */
}

.hero-content {
  position: relative;
  color: rgba(255, 255, 255, 0.95);
  z-index: 2;
  max-width: 550px;
  text-align: center; /* Center text inside card */
  background: rgba(0, 0, 0, 0.3);
  border-radius: 12px;
  
}


    .hero-overlay {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5); /* Dark overlay for readability */
      z-index: 1;
    }



    .hero-content h2 {
      font-size: 2rem;
      font-weight: 700;
      line-height: 1.2;
      color: rgba(255, 255, 255, 0.85);
    }

    .hero-content p {
      font-size: 1.3rem;
      margin-bottom: 1.5rem;
      color: rgba(255, 255, 255, 0.85);
    }

    .hero-content .btn {
      font-size: 1rem;
      padding: 0.8rem 1.5rem;
      font-weight: 600;
      background: rgba(255, 102, 0, 0.9); /* matching orange */
      border: none;
      color: #fff;
      transition: 0.3s ease;
    }

    .hero-content .btn:hover {
      background: rgba(255, 102, 0, 1);
    }

    /* Live scrolling ticker */
    .ticker {
      position: absolute;
      bottom: 0;
      width: 100%;
      background: rgba(0,0,0,0.6);
      color: #fff;
      overflow: hidden;
      white-space: nowrap;
      padding: 0.5rem 0;
      z-index: 2;
    }

    .ticker-content {
      display: inline-block;
      padding-left: 100%;
      animation: scroll 20s linear infinite;
    }

    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .hero-content h1 { font-size: 2.8rem; }
      .hero-content p { font-size: 1.2rem; }
    }

    @media (max-width: 992px) {
      .hero { justify-content: center; text-align: center; }
      .hero-content { text-align: center; max-width: 90%; }
      .hero-content h1 { font-size: 2.2rem; }
      .hero-content p { font-size: 1rem; }
    }

    @media (max-width: 576px) {
      .hero-content h1 { font-size: 1.8rem; }
      .hero-content p { font-size: 0.95rem; }
      .hero-content .btn { font-size: 0.9rem; padding: 0.6rem 1.2rem; }
    }
  </style>

  <div class="hero-overlay"></div>

  <div class="hero-content">
    <h2>Experience the Joy of Togetherness</h2>
    <p>Join local communities, celebrate traditions, and create unforgettable memories with cultural events near you.</p>
    <a href="{% url 'explore_events' %}" class="btn shadow">Explore Events</a>
</div>

  <!-- Live Scrolling Notification -->
  <div class="ticker">
    <div class="ticker-content">
      {% for event in events %}
        <span>ðŸ“¢ {{ event.title }} â€“ {{ event.date|date:"M d, Y" }} @ {{ event.location }} &nbsp;&nbsp;&nbsp;</span>
      {% empty %}
        <span>No upcoming events at the moment. Stay tuned!</span>
      {% endfor %}
    </div>
  </div>
</header>


<!-- Categories -->

<!-- Festival Highlights -->
<section class="py-5">
  <div class="container">
    <div class="d-flex justify-content-center align-items-center" style="min-height:100px;">
  <h2 class="mb-4 fw-bold text-orange text-center">Todayâ€™s Festivals</h2>
</div>

    <!-- First Row: 4 cards -->
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4 mb-5 first-row">
      {% for festival in festivals|slice:":4" %}
        {% if festival.is_active %}
        <div class="col d-flex align-items-stretch">
          <div class="card festival-card shadow-sm h-100 border-0">
            {% if festival.image %}
              <img src="{{ festival.image.url }}" class="card-img-top festival-img" alt="{{ festival.name }}">
            {% else %}
              <img src="{% static 'app/events/default.jpg' %}" class="card-img-top festival-img" alt="{{ festival.name }}">
            {% endif %}
            <div class="card-body text-center py-3">
              <h6 class="fw-bold mb-1">{{ festival.name }}</h6>
              <p class="small text-muted mb-1">{{ festival.description|truncatewords:10 }}</p>
              <p class="mb-0"><strong>Date:</strong> {{ festival.date|date:"M j, Y" }}</p>
              <p class="mb-0"><strong>Location:</strong> {{ festival.location }}</p>
              {% if festival.organizer %}
                <p class="mb-0"><strong>Organizer:</strong> {{ festival.organizer }}</p>
              {% endif %}
            </div>
          </div>
        </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Second Row: Remaining cards -->
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
      {% for festival in festivals|slice:"4:" %}
        {% if festival.is_active %}
        <div class="col d-flex align-items-stretch">
          <div class="card festival-card shadow-sm h-100 border-0">
            {% if festival.image %}
              <img src="{{ festival.image.url }}" class="card-img-top festival-img" alt="{{ festival.name }}">
            {% else %}
              <img src="{% static 'app/events/default.jpg' %}" class="card-img-top festival-img" alt="{{ festival.name }}">
            {% endif %}
            <div class="card-body text-center py-3">
              <h6 class="fw-bold mb-1">{{ festival.name }}</h6>
              <p class="small text-muted mb-1">{{ festival.description|truncatewords:10 }}</p>
              <p class="mb-0"><strong>Date:</strong> {{ festival.date|date:"M j, Y" }}</p>
              <p class="mb-0"><strong>Location:</strong> {{ festival.location }}</p>
              {% if festival.organizer %}
                <p class="mb-0"><strong>Organizer:</strong> {{ festival.organizer }}</p>
              {% endif %}
            </div>
          </div>
        </div>
        {% endif %}
      {% endfor %}
    </div>

    {% if festivals|length == 0 %}
      <p class="text-center mt-4">No festivals available today. Add one!</p>
    {% endif %}

  </div>
</section>



<!-- Upcoming Events Section -->
<section id="upcoming-events" class="py-5">
  <div class="container py-5 text-center">
    <div class="d-flex justify-content-center align-items-center" style="min-height:100px;">
  <h2 class="mb-4 fw-bold text-orange text-center">Upcoming Event</h2>
</div>


    <!-- First Row: 4 cards -->
    <div class="row g-4 mb-5">
      {% for event in events|slice:":4" %}
      <div class="col-12 col-sm-6 col-md-3 d-flex align-items-stretch">
        <div class="card event-card shadow-sm h-100">

          {% if event.image %}
            <img src="{{ event.image.url }}" class="card-img-top" alt="{{ event.title }}">
          {% else %}
            <img src="{% static 'app/images/default-event.jpg' %}" class="card-img-top" alt="Default Event">
          {% endif %}

          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ event.title }}</h5>
            <p class="card-text">{{ event.description|truncatewords:7 }}</p>
            <p class="small text-muted mb-2">
              <strong>Date:</strong> {{ event.date|date:"M d, Y" }}<br>
              <strong>Location:</strong> {{ event.location }}
            </p>

            <a href="{% url 'event_detail' event.id %}" class="btn btn-orange w-100 mb-2 mt-auto">Read More</a>

            {% if user.is_authenticated and user == event.created_by %}
              <a href="{% url 'edit_event' event.id %}" class="btn btn-secondary w-100 mb-2">Edit</a>
              <a href="{% url 'delete_event' event.id %}" class="btn btn-danger w-100">Delete</a>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Second Row: Remaining cards -->
    <div class="row g-4">
      {% for event in events|slice:"4:" %}
      <div class="col-12 col-sm-6 col-md-3 d-flex align-items-stretch">
        <div class="card event-card shadow-sm h-100">

          {% if event.image %}
            <img src="{{ event.image.url }}" class="card-img-top" alt="{{ event.title }}">
          {% else %}
            <img src="{% static 'app/images/default-event.jpg' %}" class="card-img-top" alt="Default Event">
          {% endif %}

          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ event.title }}</h5>
            <p class="card-text">{{ event.description|truncatewords:7 }}</p>
            <p class="small text-muted mb-2">
              <strong>Date:</strong> {{ event.date|date:"M d, Y" }}<br>
              <strong>Location:</strong> {{ event.location }}
            </p>

            <a href="{% url 'event_detail' event.id %}" class="btn btn-orange w-100 mb-2 mt-auto">Read More</a>

            {% if user.is_authenticated and user == event.created_by %}
              <a href="{% url 'edit_event' event.id %}" class="btn btn-secondary w-100 mb-2">Edit</a>
              <a href="{% url 'delete_event' event.id %}" class="btn btn-danger w-100">Delete</a>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    {% if events|length == 0 %}
      <p class="text-muted mt-4">No upcoming events right now.</p>
    {% endif %}

  </div>
</section>

<!-- Messages -->
{% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} mb-2 alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

<!-- this code promt .... -->

<section id="newsletter" class="py-5" style="background: linear-gradient(135deg, #6a5dfc, #9b2eea);">
  <div class="container text-center text-white">

    <!-- Heading -->
    <h2 class="mb-2 fw-bold" style="color: #ff6404;">Stay Updated with Upcoming Events</h2>
    <p class="mb-4 text-white-75 fs-5">
      Subscribe to get the latest festival updates like Ganesh Chaturthi, Diwali, Eid & more!
    </p>

    <!-- Newsletter Form -->
    <form method="post" action="{% url 'subscribe' %}" class="row justify-content-center g-2" novalidate>
      {% csrf_token %}
      
      <!-- Email Input -->
      <div class="col-12 col-sm-8 col-md-6 col-lg-5">
        <label for="newsletterEmail" class="visually-hidden">Email address</label>
        <input 
          id="newsletterEmail"
          type="email"
          name="email"
          class="form-control form-control-lg rounded-pill shadow-sm"
          placeholder="Enter your email"
          required
        >
      </div>

      <!-- Subscribe Button -->
      <div class="col-12 col-sm-4 col-md-3 col-lg-2">
        <button type="submit" class="btn btn-orange btn-lg w-100 rounded-pill shadow-sm">
          Subscribe
        </button>
      </div>
    </form>

    <!-- Privacy Note -->
    <small class="d-block mt-3 text-white-50">
      We respect your privacy. Unsubscribe anytime.
    </small>

  </div>
</section>


<section id="contact" class="py-5" style="background: rgba(255, 100, 4, 0.05);">
  <div class="container py-5">

    <!-- Heading -->

    <div class="text-center mb-5">
      <h2 class="fw-bold text-orange animate__animated animate__fadeInDown">Contact Us</h2>
      <p class="text-muted animate__animated animate__fadeInUp">Have questions about our events? Get in touch with us today.</p>
    </div>

    <!-- Contact Form -->

    <div class="row justify-content-center">
      <div class="col-lg-8 col-md-10 col-sm-12">
        <div class="card shadow-lg border-0 rounded-3 animate__animated animate__fadeInUp" style="background: rgba(255, 255, 255, 0.95);">
          <div class="card-body p-4">

            <!-- Success/Error Messages -->

            {% if messages %}
              {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                  {{ message }}
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
              {% endfor %}
            {% endif %}

            <form method="post" action="{% url 'contact' %}" class="needs-validation" novalidate>
              {% csrf_token %}
              <div class="row g-3">

                <!-- Name -->

                <div class="col-md-6">
                  <label class="form-label fw-semibold">Your Name</label>
                  <input type="text" name="name" class="form-control shadow-sm" placeholder="Enter your name" required>
                </div>

                <!-- Email -->

                <div class="col-md-6">
                  <label class="form-label fw-semibold">Your Email</label>
                  <input type="email" name="email" class="form-control shadow-sm" placeholder="Enter your email" required>
                </div>

                <!-- Subject -->

                <div class="col-12">
                  <label class="form-label fw-semibold">Subject</label>
                  <input type="text" name="subject" class="form-control shadow-sm" placeholder="Enter subject" required>
                </div>

                <!-- Message -->

                <div class="col-12">
                  <label class="form-label fw-semibold">Message</label>
                  <textarea name="message" rows="5" class="form-control shadow-sm" placeholder="Write your message..." required></textarea>
                </div>

                <!-- Submit -->

                <div class="col-12 text-center py-4">
                  <button type="submit" class="btn btn-orange px-4 py-2 shadow-sm fw-semibold">
                    Send Message
                  </button>
                </div>

              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


{% endblock %}
